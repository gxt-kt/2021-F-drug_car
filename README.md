# 2021-F-drug_car
### 一.介绍
2021电赛F题智能送药小车，比赛时间11/4日到11/7日，获得了全国一等奖。下面是开源的一些介绍及其他。
### 二.实现方案
#### 1.OPENMV巡线
OPENMV巡线是我其中一个队友写的，具体思路是分区域找红色色块来寻中线和找边界转弯点，将数据传给stm32，openmv4大概25fps，plus大概45fps
#### 2.K210数字识别
数字识别12345678文件夹里的所有内容可以移到一张sd卡里，给k210烧录启动固件（在官网maixpy有），就可以开机运行了里面的数据集已经是2500+的数据集，效果挺好的。
#### 3.stm32核心主控
stm32f407负责控制电机和接收openmv，k210传感器数据并处理。核心找病房，回药房等算法实现都是再stm32主控实现。  
关于主控stm32f407的代码，由于四天三夜时间限制，移植的是我之前的一个完全版工程，这次国电赛主要代码都要看keil里国电赛文件。代码很多也比较复杂，大家实在看不懂就算了，openmv和k210还是比较好理解的。
#### 4.其他
最终版一号车是一号车的代码，主要看TASK2_GO这个函数，并且小车1永远都是执行任务2，默认是基础功能和扩展功能都发送数据，关于数据处理在二号车的中断处理代码那里。  
小车二是专门用来走扩展功能的，扩展1走的是任务2，扩展2走的是任务3。  
